<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/me319/libs/highlight/github.min.css"> <link rel=stylesheet  href="/me319/css/franklin.css"> <link rel=stylesheet  href="/me319/css/poole_hyde.css"> <link rel=stylesheet  href="/me319/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 968px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/me319/assets/c.svg"> <title>Lab 6 - Offline Digital Filtering</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <img src="/me319/assets/KuwaitUniversityLogoTextLight.svg" style="width: 200px; height: auto; display: inline"> <h1 style="font-size:2em; opacity: 0.75;"><a href="/me319/">ME 319</a></h1> <p class=lead >Mechatronics</p> </div> <script> function hidePart(part_div) { var x = document.getElementById(part_div); if (x.style.display === "none") { x.style.display = "block"; } else { x.style.display = "none"; } } </script> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/me319/">Home</a> <a class="sidebar-nav-item " href="/me319/videos/">Lecture Videos</a> <a class="sidebar-nav-item " href="https://alsaibie.github.io/embedded_ccpp">Embedded C/C++ Mini-Course</a> <a class="sidebar-nav-item " href="/me319/lab_assignments/">Lab Assignments</a> <br> <small style="text-transform: uppercase; font-size: 0.75em">Lab Lessons</small> <div class=part  onclick="hidePart('prelabs_div')">Prelabs</div> <div id=prelabs_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/prelabs/prelab2/"><b>Lab 2</b> - <em>PlatformIO and Arduino</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab3/"><b>Lab 3</b> - <em>Debugging and LL Programming</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab4/"><b>Lab 4</b> - <em>Timers and Interrupts</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab5/"><b>Lab 5</b> - <em>Serial Communication</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab6/"><b>Lab 6</b> - <em>Offline Digital Filtering</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab7/"><b>Lab 7</b> - <em>Online Digital Filtering</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab8/"><b>Lab 8</b> - <em>Motor Dynamics and Control</em></a> <a class="sidebar-nav-item " href="/me319/prelabs/prelab9/"><b>Lab 9</b> - <em>Realtime Motor Control</em></a> </div> <div class=part  onclick="hidePart('addlessons_div')">Additional Lessons</div> <div id=addlessons_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/prelabsextra/lab4extra/"> <b>L4E</b> - <em>Low Level Timers Configuration</em></a> </div> <br> <small style="text-transform: uppercase; font-size: 0.75em">Class Lectures</small> <div class=part  onclick="hidePart('part1_div')">I The Brain</div> <div id=part1_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/part_i/lecture0/"><b>L0</b> - <em>Introduction</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture1/"><b>L1</b> - <em>Microcontroller Architecture</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture2/"><b>L2</b> - <em>Digital Arithmetic</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture3/"><b>L3</b> - <em>Digital Logic</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture4/"><b>L4</b> - <em>Microcontroller Peripherals</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture5/"><b>L5</b> - <em>GPIO</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture6/"><b>L6</b> - <em>Timers</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture7/"><b>L7</b> - <em>Interrupts</em></a> <a class="sidebar-nav-item " href="/me319/part_i/lecture8/"><b>L8</b> - <em>Communication</em></a> </div> <div class=part  onclick="hidePart('part2_div')">II The Cells</div> <div id=part2_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/part_ii/lecture1/"><b>L1</b> - <em>Passive Circuits</em></a> <a class="sidebar-nav-item " href="/me319/part_ii/lecture2/"><b>L2</b> - <em>Switching Semiconductors</em></a> <a class="sidebar-nav-item " href="/me319/part_ii/lecture3/"><b>L3</b> - <em>Operational Amplifiers</em></a> </div> <div class=part  onclick="hidePart('part3_div')">III The Senses</div> <div id=part3_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/part_iii/lecture1/"><b>L1</b> - <em>Signal Conditioning and Filtering</em></a> <a class="sidebar-nav-item " href="/me319/part_iii/lecture2/"><b>L2</b> - <em>Sensor Charactersitics</em></a> <a class="sidebar-nav-item " href="/me319/part_iii/lecture3/"><b>L3</b> - <em>Survey of Sensors</em></a> <a class="sidebar-nav-item " href="/me319/part_iii/lecture4/"><b>L4</b> - <em>Motion Sensors</em></a> </div> <div class=part  onclick="hidePart('part4_div')">IV The Muscles</div> <div id=part4_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/part_iv/lecture1/"><b>L1</b> - <em>DC Motors</em></a> <a class="sidebar-nav-item " href="/me319/part_iv/lecture2/"><b>L2</b> - <em>Practical Feedback Control</em></a> <a class="sidebar-nav-item " href="/me319/part_iv/lecture4/"><b>L3</b> - <em>Stepper Motors</em></a> </div> <div class=part  onclick="hidePart('part5_div')">V The Body</div> <div id=part5_div  style="display:none;"> <a class="sidebar-nav-item " href="/me319/part_v/lecture1/"><b>L1</b> - <em>System Integration</em></a> </div> </nav> <p>&copy; Ali AlSaibie, PhD.</p> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=lab_6_-_offline_digital_filtering ><a href="#lab_6_-_offline_digital_filtering" class=header-anchor >Lab 6 - Offline Digital Filtering</a></h1> <p>In this assignment you will be analyzing and applying a digital filter on pre-collected data offline.</p> <p>Before attempting this assignment, make sure you go through the Prelab 6 first. </p> <h2 id=tools_required ><a href="#tools_required" class=header-anchor >Tools Required</a></h2> <ul> <li><p>MATLAB v 2016b or higher, with DSP or Signal Processing Toolbox and Control System Toolbox</p> </ul> <h2 id=references ><a href="#references" class=header-anchor >References</a></h2> <p>1.	Lab Report Submission Guidelines</p> <h2 id=project_creation_submission ><a href="#project_creation_submission" class=header-anchor >Project Creation &amp; Submission</a></h2> <p>You will work within a single MATLAB Live Script file, add your comments and code within it and submit only a single *.mlx file &#43; a single pdf exported from the Live Script &#40;From Live Editor Tab, click on the save drop down menu and select Export as PDF&#41;.</p> <p>You may need to increase the heap size for MATLAB if you get an export to pdf error, by going to Home Tab then Preferences-&gt;MATLAB-&gt;General-&gt;Java Heap Memory, and doubling the allowable memory, this also speeds up MATLAB in general if you have spare RAM to allocate on your machine. You can also submit a Jupyter notebook &#40;Julia, Python or MATLAB&#41;</p> <img src="/me319/labs/l6assets/matlab_memory.png" alt=""> <h2 id=questions ><a href="#questions" class=header-anchor >Questions</a></h2> <p>Perform the following in a MATLAB Live Script or Jupyter Notebook. </p> <ol> <li><p>Import the provided sensor data from the <a href="/me319/labs/l6assets/Dataset_Medium_Tap.xlsx"><code>Dataset_Medium_Tap.xls</code></a> file and into MATLAB</p> <li><p>Plot the acceleration in the z direction </p> <p>a. Explain your observation about the data </p> <li><p>Analyze the acceleration data using FFT</p> <p>a. Explain your observation about the frequency characteristic of the data</p> <li><p>Design a Low Pass First Order Filter on the accelerometer data</p> <p>a. Implement the filter using the difference equation method</p> <p>b. Compare the filtered output to the unfiltered output, and explain the observed differences</p> <li><p>Design a Low Pass Butterworth second order filter to improve the filter performance</p> <p>a. Implement the filter using the difference equation method</p> <p>b. Compare the filtered output to the unfiltered output, as well as to the filtered output from the first order filter, and explain the observed difference.</p> <li><p>Apply the Low Pass Butterworth second-order filter on the z-axis accelerometer data from the <a href="/me319/labs/l6assets/Dataset_Slow_Tap.xlsx"><code>Dataset_Slow_Tap</code></a> and <a href="/me319/labs/l6assets/Dataset_Fast_Tap.xlsx"><code>Dataset_Fast_Tap</code></a> data. Plot in 3 adjacent subplots the unfiltered and filtered signal for each of the 3 data sets z-axis accelerometer data. </p> </ol> <p>To read an excel table in MATLAB, you can use the function <code>readtable&#40;&#41;</code></p> <pre><code class="matlab hljs"><span class=hljs-built_in >table</span> = <span class=hljs-built_in >readtable</span>(<span class=hljs-string >&quot;Dataset_Medium_Tap.xlsx&quot;</span>);
<span class=hljs-comment >% Plot data</span>
<span class=hljs-built_in >figure</span>()
<span class=hljs-built_in >plot</span>(<span class=hljs-built_in >table</span>.Time_ms_, <span class=hljs-built_in >table</span>.AccZ_mg_);</code></pre> <div class=page-foot > <div class=copyright > &copy; Ali AlSaibie, PhD. Last modified: June 02, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div>